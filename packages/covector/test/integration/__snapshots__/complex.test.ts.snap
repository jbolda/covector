// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`integration test for complex commands > dry run > runs build 1`] = `
{
  "commandsRan": {
    "package-one": {
      "command": "## \\[2.3.1]

- Added some cool things.

",
      "pkg": {
        "command": [
          {
            "command": "npm run build",
            "dryRunCommand": undefined,
            "pipe": true,
          },
        ],
        "dependencies": undefined,
        "errorOnVersionRange": null,
        "manager": "javascript",
        "path": "./packages/package-one",
        "pkg": "package-one",
        "pkgFile": {
          "currentVersion": "2.3.1",
          "deps": {},
          "file": {
            "content": "{
  "name": "package-one",
  "description": "shrugs",
  "version": "2.3.1",
  "license": "MIT",
  "scripts": {
    "build": "npm info tauri@0.8.0 description",
    "test": "npm info covector@0.1.0 license"
  }
}
",
            "extname": ".json",
            "filename": "package",
            "path": "packages/package-one/package.json",
          },
          "name": "package-one",
          "pkg": {
            "description": "shrugs",
            "license": "MIT",
            "name": "package-one",
            "scripts": {
              "build": "npm info tauri@0.8.0 description",
              "test": "npm info covector@0.1.0 license",
            },
            "version": "2.3.1",
          },
          "version": "2.3.1",
          "versionMajor": 2,
          "versionMinor": 3,
          "versionPatch": 1,
          "versionPrerelease": null,
        },
        "postcommand": null,
        "precommand": null,
        "releaseTag": "package-one-v2.3.1",
      },
      "postcommand": false,
      "precommand": false,
    },
    "package-two": {
      "command": "## \\[1.9.0]

- Added some even cooler things.

",
      "pkg": {
        "command": [
          {
            "command": "npm run build",
            "dryRunCommand": undefined,
            "pipe": true,
          },
        ],
        "dependencies": undefined,
        "errorOnVersionRange": null,
        "manager": "javascript",
        "path": "./packages/package-two",
        "pkg": "package-two",
        "pkgFile": {
          "currentVersion": "1.9.0",
          "deps": {},
          "file": {
            "content": "{
  "name": "package-two",
  "description": "shrugs",
  "version": "1.9.0",
  "license": "MIT",
  "scripts": {
    "build": "echo this command is not piped, it is run from scripts for pk2",
    "test": "echo this command is not piped, it is run from the test script"
  }
}
",
            "extname": ".json",
            "filename": "package",
            "path": "packages/package-two/package.json",
          },
          "name": "package-two",
          "pkg": {
            "description": "shrugs",
            "license": "MIT",
            "name": "package-two",
            "scripts": {
              "build": "echo this command is not piped, it is run from scripts for pk2",
              "test": "echo this command is not piped, it is run from the test script",
            },
            "version": "1.9.0",
          },
          "version": "1.9.0",
          "versionMajor": 1,
          "versionMinor": 9,
          "versionPatch": 0,
          "versionPrerelease": null,
        },
        "postcommand": null,
        "precommand": null,
        "releaseTag": "package-two-v1.9.0",
      },
      "postcommand": false,
      "precommand": false,
    },
  },
  "pipeTemplate": {
    "package-one": {
      "name": "package-one",
      "pipe": {
        "pkg": {
          "changelog": "## \\[2.3.1]

- Added some cool things.
",
          "command": {
            "command": "npm run build",
            "pipe": true,
          },
          "dependencies": undefined,
          "errorOnVersionRange": null,
          "manager": "javascript",
          "path": "./packages/package-one",
          "pkg": "package-one",
          "postcommand": null,
          "precommand": null,
          "releaseTag": null,
          "tag": "",
        },
        "pkgFile": {
          "currentVersion": "2.3.1",
          "deps": {},
          "name": "package-one",
          "pkg": {
            "description": "shrugs",
            "license": "MIT",
            "name": "package-one",
            "scripts": {
              "build": "npm info tauri@0.8.0 description",
              "test": "npm info covector@0.1.0 license",
            },
            "version": "2.3.1",
          },
          "version": "2.3.1",
          "versionMajor": 2,
          "versionMinor": 3,
          "versionPatch": 1,
        },
      },
    },
    "package-two": {
      "name": "package-two",
      "pipe": {
        "pkg": {
          "changelog": "## \\[1.9.0]

- Added some even cooler things.
",
          "command": {
            "command": "npm run build",
            "pipe": true,
          },
          "dependencies": undefined,
          "errorOnVersionRange": null,
          "manager": "javascript",
          "path": "./packages/package-two",
          "pkg": "package-two",
          "postcommand": null,
          "precommand": null,
          "releaseTag": null,
          "tag": "",
        },
        "pkgFile": {
          "currentVersion": "1.9.0",
          "deps": {},
          "name": "package-two",
          "pkg": {
            "description": "shrugs",
            "license": "MIT",
            "name": "package-two",
            "scripts": {
              "build": "echo this command is not piped, it is run from scripts for pk2",
              "test": "echo this command is not piped, it is run from the test script",
            },
            "version": "1.9.0",
          },
          "version": "1.9.0",
          "versionMajor": 1,
          "versionMinor": 9,
          "versionPatch": 0,
        },
      },
    },
  },
}
`;

exports[`integration test for complex commands > dry run > runs publish 1`] = `
{
  "commandsRan": {
    "package-one": {
      "command": "## \\[2.3.1]

- Added some cool things.

",
      "pkg": {
        "command": [
          {
            "command": "echo publish",
            "dryRunCommand": undefined,
            "pipe": true,
          },
        ],
        "dependencies": undefined,
        "errorOnVersionRange": null,
        "manager": "javascript",
        "path": "./packages/package-one",
        "pkg": "package-one",
        "pkgFile": {
          "currentVersion": "2.3.1",
          "deps": {},
          "file": {
            "content": "{
  "name": "package-one",
  "description": "shrugs",
  "version": "2.3.1",
  "license": "MIT",
  "scripts": {
    "build": "npm info tauri@0.8.0 description",
    "test": "npm info covector@0.1.0 license"
  }
}
",
            "extname": ".json",
            "filename": "package",
            "path": "packages/package-one/package.json",
          },
          "name": "package-one",
          "pkg": {
            "description": "shrugs",
            "license": "MIT",
            "name": "package-one",
            "scripts": {
              "build": "npm info tauri@0.8.0 description",
              "test": "npm info covector@0.1.0 license",
            },
            "version": "2.3.1",
          },
          "version": "2.3.1",
          "versionMajor": 2,
          "versionMinor": 3,
          "versionPatch": 1,
          "versionPrerelease": null,
        },
        "postcommand": null,
        "precommand": null,
        "releaseTag": "package-one-v2.3.1",
      },
      "postcommand": false,
      "precommand": false,
      "published": true,
    },
    "package-two": {
      "command": "## \\[1.9.0]

- Added some even cooler things.

",
      "pkg": {
        "command": [
          {
            "command": "echo publish",
            "dryRunCommand": undefined,
            "pipe": true,
          },
        ],
        "dependencies": undefined,
        "errorOnVersionRange": null,
        "manager": "javascript",
        "path": "./packages/package-two",
        "pkg": "package-two",
        "pkgFile": {
          "currentVersion": "1.9.0",
          "deps": {},
          "file": {
            "content": "{
  "name": "package-two",
  "description": "shrugs",
  "version": "1.9.0",
  "license": "MIT",
  "scripts": {
    "build": "echo this command is not piped, it is run from scripts for pk2",
    "test": "echo this command is not piped, it is run from the test script"
  }
}
",
            "extname": ".json",
            "filename": "package",
            "path": "packages/package-two/package.json",
          },
          "name": "package-two",
          "pkg": {
            "description": "shrugs",
            "license": "MIT",
            "name": "package-two",
            "scripts": {
              "build": "echo this command is not piped, it is run from scripts for pk2",
              "test": "echo this command is not piped, it is run from the test script",
            },
            "version": "1.9.0",
          },
          "version": "1.9.0",
          "versionMajor": 1,
          "versionMinor": 9,
          "versionPatch": 0,
          "versionPrerelease": null,
        },
        "postcommand": null,
        "precommand": null,
        "releaseTag": "package-two-v1.9.0",
      },
      "postcommand": false,
      "precommand": false,
      "published": true,
    },
  },
  "pipeTemplate": {
    "package-one": {
      "name": "package-one",
      "pipe": {
        "pkg": {
          "changelog": "## \\[2.3.1]

- Added some cool things.
",
          "command": {
            "command": "echo publish",
            "pipe": true,
          },
          "dependencies": undefined,
          "errorOnVersionRange": null,
          "manager": "javascript",
          "path": "./packages/package-one",
          "pkg": "package-one",
          "postcommand": null,
          "precommand": null,
          "releaseTag": null,
          "tag": "",
        },
        "pkgFile": {
          "currentVersion": "2.3.1",
          "deps": {},
          "name": "package-one",
          "pkg": {
            "description": "shrugs",
            "license": "MIT",
            "name": "package-one",
            "scripts": {
              "build": "npm info tauri@0.8.0 description",
              "test": "npm info covector@0.1.0 license",
            },
            "version": "2.3.1",
          },
          "version": "2.3.1",
          "versionMajor": 2,
          "versionMinor": 3,
          "versionPatch": 1,
        },
      },
    },
    "package-two": {
      "name": "package-two",
      "pipe": {
        "pkg": {
          "changelog": "## \\[1.9.0]

- Added some even cooler things.
",
          "command": {
            "command": "echo publish",
            "pipe": true,
          },
          "dependencies": undefined,
          "errorOnVersionRange": null,
          "manager": "javascript",
          "path": "./packages/package-two",
          "pkg": "package-two",
          "postcommand": null,
          "precommand": null,
          "releaseTag": null,
          "tag": "",
        },
        "pkgFile": {
          "currentVersion": "1.9.0",
          "deps": {},
          "name": "package-two",
          "pkg": {
            "description": "shrugs",
            "license": "MIT",
            "name": "package-two",
            "scripts": {
              "build": "echo this command is not piped, it is run from scripts for pk2",
              "test": "echo this command is not piped, it is run from the test script",
            },
            "version": "1.9.0",
          },
          "version": "1.9.0",
          "versionMajor": 1,
          "versionMinor": 9,
          "versionPatch": 0,
        },
      },
    },
  },
}
`;

exports[`integration test for complex commands > dry run > runs test 1`] = `
{
  "commandsRan": {
    "package-one": {
      "command": "## \\[2.3.1]

- Added some cool things.

",
      "pkg": {
        "command": [
          {
            "command": "npm run build",
            "dryRunCommand": undefined,
            "pipe": true,
          },
          {
            "command": "npm test",
            "dryRunCommand": false,
          },
          {
            "command": "echo boop",
            "dryRunCommand": "echo deboop",
          },
        ],
        "dependencies": undefined,
        "errorOnVersionRange": null,
        "manager": "javascript",
        "path": "./packages/package-one",
        "pkg": "package-one",
        "pkgFile": {
          "currentVersion": "2.3.1",
          "deps": {},
          "file": {
            "content": "{
  "name": "package-one",
  "description": "shrugs",
  "version": "2.3.1",
  "license": "MIT",
  "scripts": {
    "build": "npm info tauri@0.8.0 description",
    "test": "npm info covector@0.1.0 license"
  }
}
",
            "extname": ".json",
            "filename": "package",
            "path": "packages/package-one/package.json",
          },
          "name": "package-one",
          "pkg": {
            "description": "shrugs",
            "license": "MIT",
            "name": "package-one",
            "scripts": {
              "build": "npm info tauri@0.8.0 description",
              "test": "npm info covector@0.1.0 license",
            },
            "version": "2.3.1",
          },
          "version": "2.3.1",
          "versionMajor": 2,
          "versionMinor": 3,
          "versionPatch": 1,
          "versionPrerelease": null,
        },
        "postcommand": null,
        "precommand": null,
        "releaseTag": "package-one-v2.3.1",
      },
      "postcommand": false,
      "precommand": false,
    },
    "package-two": {
      "command": "## \\[1.9.0]

- Added some even cooler things.

",
      "pkg": {
        "command": [
          {
            "command": "npm run build",
            "dryRunCommand": undefined,
            "pipe": true,
          },
          {
            "command": "npm test",
            "dryRunCommand": false,
          },
          {
            "command": "echo boop",
            "dryRunCommand": "echo deboop",
          },
        ],
        "dependencies": undefined,
        "errorOnVersionRange": null,
        "manager": "javascript",
        "path": "./packages/package-two",
        "pkg": "package-two",
        "pkgFile": {
          "currentVersion": "1.9.0",
          "deps": {},
          "file": {
            "content": "{
  "name": "package-two",
  "description": "shrugs",
  "version": "1.9.0",
  "license": "MIT",
  "scripts": {
    "build": "echo this command is not piped, it is run from scripts for pk2",
    "test": "echo this command is not piped, it is run from the test script"
  }
}
",
            "extname": ".json",
            "filename": "package",
            "path": "packages/package-two/package.json",
          },
          "name": "package-two",
          "pkg": {
            "description": "shrugs",
            "license": "MIT",
            "name": "package-two",
            "scripts": {
              "build": "echo this command is not piped, it is run from scripts for pk2",
              "test": "echo this command is not piped, it is run from the test script",
            },
            "version": "1.9.0",
          },
          "version": "1.9.0",
          "versionMajor": 1,
          "versionMinor": 9,
          "versionPatch": 0,
          "versionPrerelease": null,
        },
        "postcommand": null,
        "precommand": null,
        "releaseTag": "package-two-v1.9.0",
      },
      "postcommand": false,
      "precommand": false,
    },
  },
  "pipeTemplate": {
    "package-one": {
      "name": "package-one",
      "pipe": {
        "pkg": {
          "changelog": "## \\[2.3.1]

- Added some cool things.
",
          "command": [
            {
              "command": "npm run build",
              "pipe": true,
            },
            {
              "command": "npm test",
              "dryRunCommand": false,
            },
            {
              "command": "echo boop",
              "dryRunCommand": "echo deboop",
            },
          ],
          "dependencies": undefined,
          "errorOnVersionRange": null,
          "manager": "javascript",
          "path": "./packages/package-one",
          "pkg": "package-one",
          "postcommand": null,
          "precommand": null,
          "releaseTag": null,
          "tag": "",
        },
        "pkgFile": {
          "currentVersion": "2.3.1",
          "deps": {},
          "name": "package-one",
          "pkg": {
            "description": "shrugs",
            "license": "MIT",
            "name": "package-one",
            "scripts": {
              "build": "npm info tauri@0.8.0 description",
              "test": "npm info covector@0.1.0 license",
            },
            "version": "2.3.1",
          },
          "version": "2.3.1",
          "versionMajor": 2,
          "versionMinor": 3,
          "versionPatch": 1,
        },
      },
    },
    "package-two": {
      "name": "package-two",
      "pipe": {
        "pkg": {
          "changelog": "## \\[1.9.0]

- Added some even cooler things.
",
          "command": [
            {
              "command": "npm run build",
              "pipe": true,
            },
            {
              "command": "npm test",
              "dryRunCommand": false,
            },
            {
              "command": "echo boop",
              "dryRunCommand": "echo deboop",
            },
          ],
          "dependencies": undefined,
          "errorOnVersionRange": null,
          "manager": "javascript",
          "path": "./packages/package-two",
          "pkg": "package-two",
          "postcommand": null,
          "precommand": null,
          "releaseTag": null,
          "tag": "",
        },
        "pkgFile": {
          "currentVersion": "1.9.0",
          "deps": {},
          "name": "package-two",
          "pkg": {
            "description": "shrugs",
            "license": "MIT",
            "name": "package-two",
            "scripts": {
              "build": "echo this command is not piped, it is run from scripts for pk2",
              "test": "echo this command is not piped, it is run from the test script",
            },
            "version": "1.9.0",
          },
          "version": "1.9.0",
          "versionMajor": 1,
          "versionMinor": 9,
          "versionPatch": 0,
        },
      },
    },
  },
}
`;

exports[`integration test for complex commands > dry run > runs version 1`] = `
{
  "commandsRan": {
    "package-one": {
      "applied": false,
      "command": false,
      "postcommand": false,
      "precommand": false,
    },
    "package-two": {
      "applied": false,
      "command": false,
      "postcommand": false,
      "precommand": false,
    },
  },
  "pipeTemplate": {},
}
`;

exports[`integration test for complex commands > prod > runs build 1`] = `
{
  "commandsRan": {
    "package-one": {
      "command": "## \\[2.3.1]

- Added some cool things.

> package-one@2.3.1 build
> npm info tauri@0.8.0 description

npm warn Ignoring workspaces for specified package(s)
Multi-binding collection of libraries and templates for building Tauri apps
",
      "pkg": {
        "command": [
          {
            "command": "npm run build",
            "dryRunCommand": undefined,
            "pipe": true,
          },
        ],
        "dependencies": undefined,
        "errorOnVersionRange": null,
        "manager": "javascript",
        "path": "./packages/package-one",
        "pkg": "package-one",
        "pkgFile": {
          "currentVersion": "2.3.1",
          "deps": {},
          "file": {
            "content": "{
  "name": "package-one",
  "description": "shrugs",
  "version": "2.3.1",
  "license": "MIT",
  "scripts": {
    "build": "npm info tauri@0.8.0 description",
    "test": "npm info covector@0.1.0 license"
  }
}
",
            "extname": ".json",
            "filename": "package",
            "path": "packages/package-one/package.json",
          },
          "name": "package-one",
          "pkg": {
            "description": "shrugs",
            "license": "MIT",
            "name": "package-one",
            "scripts": {
              "build": "npm info tauri@0.8.0 description",
              "test": "npm info covector@0.1.0 license",
            },
            "version": "2.3.1",
          },
          "version": "2.3.1",
          "versionMajor": 2,
          "versionMinor": 3,
          "versionPatch": 1,
          "versionPrerelease": null,
        },
        "postcommand": null,
        "precommand": null,
        "releaseTag": "package-one-v2.3.1",
      },
      "postcommand": false,
      "precommand": false,
    },
    "package-two": {
      "command": "## \\[1.9.0]

- Added some even cooler things.

> package-two@1.9.0 build
> echo this command is not piped, it is run from scripts for pk2

this command is not piped, it is run from scripts for pk2
",
      "pkg": {
        "command": [
          {
            "command": "npm run build",
            "dryRunCommand": undefined,
            "pipe": true,
          },
        ],
        "dependencies": undefined,
        "errorOnVersionRange": null,
        "manager": "javascript",
        "path": "./packages/package-two",
        "pkg": "package-two",
        "pkgFile": {
          "currentVersion": "1.9.0",
          "deps": {},
          "file": {
            "content": "{
  "name": "package-two",
  "description": "shrugs",
  "version": "1.9.0",
  "license": "MIT",
  "scripts": {
    "build": "echo this command is not piped, it is run from scripts for pk2",
    "test": "echo this command is not piped, it is run from the test script"
  }
}
",
            "extname": ".json",
            "filename": "package",
            "path": "packages/package-two/package.json",
          },
          "name": "package-two",
          "pkg": {
            "description": "shrugs",
            "license": "MIT",
            "name": "package-two",
            "scripts": {
              "build": "echo this command is not piped, it is run from scripts for pk2",
              "test": "echo this command is not piped, it is run from the test script",
            },
            "version": "1.9.0",
          },
          "version": "1.9.0",
          "versionMajor": 1,
          "versionMinor": 9,
          "versionPatch": 0,
          "versionPrerelease": null,
        },
        "postcommand": null,
        "precommand": null,
        "releaseTag": "package-two-v1.9.0",
      },
      "postcommand": false,
      "precommand": false,
    },
  },
  "pipeTemplate": {
    "package-one": {
      "name": "package-one",
      "pipe": {
        "pkg": {
          "changelog": "## \\[2.3.1]

- Added some cool things.
",
          "command": {
            "command": "npm run build",
            "pipe": true,
          },
          "dependencies": undefined,
          "errorOnVersionRange": null,
          "manager": "javascript",
          "path": "./packages/package-one",
          "pkg": "package-one",
          "postcommand": null,
          "precommand": null,
          "releaseTag": null,
          "tag": "",
        },
        "pkgFile": {
          "currentVersion": "2.3.1",
          "deps": {},
          "name": "package-one",
          "pkg": {
            "description": "shrugs",
            "license": "MIT",
            "name": "package-one",
            "scripts": {
              "build": "npm info tauri@0.8.0 description",
              "test": "npm info covector@0.1.0 license",
            },
            "version": "2.3.1",
          },
          "version": "2.3.1",
          "versionMajor": 2,
          "versionMinor": 3,
          "versionPatch": 1,
        },
      },
    },
    "package-two": {
      "name": "package-two",
      "pipe": {
        "pkg": {
          "changelog": "## \\[1.9.0]

- Added some even cooler things.
",
          "command": {
            "command": "npm run build",
            "pipe": true,
          },
          "dependencies": undefined,
          "errorOnVersionRange": null,
          "manager": "javascript",
          "path": "./packages/package-two",
          "pkg": "package-two",
          "postcommand": null,
          "precommand": null,
          "releaseTag": null,
          "tag": "",
        },
        "pkgFile": {
          "currentVersion": "1.9.0",
          "deps": {},
          "name": "package-two",
          "pkg": {
            "description": "shrugs",
            "license": "MIT",
            "name": "package-two",
            "scripts": {
              "build": "echo this command is not piped, it is run from scripts for pk2",
              "test": "echo this command is not piped, it is run from the test script",
            },
            "version": "1.9.0",
          },
          "version": "1.9.0",
          "versionMajor": 1,
          "versionMinor": 9,
          "versionPatch": 0,
        },
      },
    },
  },
}
`;

exports[`integration test for complex commands > prod > runs publish 1`] = `
{
  "commandsRan": {
    "package-one": {
      "command": "## \\[2.3.1]

- Added some cool things.

publish
",
      "pkg": {
        "command": [
          {
            "command": "echo publish",
            "dryRunCommand": undefined,
            "pipe": true,
          },
        ],
        "dependencies": undefined,
        "errorOnVersionRange": null,
        "manager": "javascript",
        "path": "./packages/package-one",
        "pkg": "package-one",
        "pkgFile": {
          "currentVersion": "2.3.1",
          "deps": {},
          "file": {
            "content": "{
  "name": "package-one",
  "description": "shrugs",
  "version": "2.3.1",
  "license": "MIT",
  "scripts": {
    "build": "npm info tauri@0.8.0 description",
    "test": "npm info covector@0.1.0 license"
  }
}
",
            "extname": ".json",
            "filename": "package",
            "path": "packages/package-one/package.json",
          },
          "name": "package-one",
          "pkg": {
            "description": "shrugs",
            "license": "MIT",
            "name": "package-one",
            "scripts": {
              "build": "npm info tauri@0.8.0 description",
              "test": "npm info covector@0.1.0 license",
            },
            "version": "2.3.1",
          },
          "version": "2.3.1",
          "versionMajor": 2,
          "versionMinor": 3,
          "versionPatch": 1,
          "versionPrerelease": null,
        },
        "postcommand": null,
        "precommand": null,
        "releaseTag": "package-one-v2.3.1",
      },
      "postcommand": false,
      "precommand": false,
      "published": true,
    },
    "package-two": {
      "command": "## \\[1.9.0]

- Added some even cooler things.

publish
",
      "pkg": {
        "command": [
          {
            "command": "echo publish",
            "dryRunCommand": undefined,
            "pipe": true,
          },
        ],
        "dependencies": undefined,
        "errorOnVersionRange": null,
        "manager": "javascript",
        "path": "./packages/package-two",
        "pkg": "package-two",
        "pkgFile": {
          "currentVersion": "1.9.0",
          "deps": {},
          "file": {
            "content": "{
  "name": "package-two",
  "description": "shrugs",
  "version": "1.9.0",
  "license": "MIT",
  "scripts": {
    "build": "echo this command is not piped, it is run from scripts for pk2",
    "test": "echo this command is not piped, it is run from the test script"
  }
}
",
            "extname": ".json",
            "filename": "package",
            "path": "packages/package-two/package.json",
          },
          "name": "package-two",
          "pkg": {
            "description": "shrugs",
            "license": "MIT",
            "name": "package-two",
            "scripts": {
              "build": "echo this command is not piped, it is run from scripts for pk2",
              "test": "echo this command is not piped, it is run from the test script",
            },
            "version": "1.9.0",
          },
          "version": "1.9.0",
          "versionMajor": 1,
          "versionMinor": 9,
          "versionPatch": 0,
          "versionPrerelease": null,
        },
        "postcommand": null,
        "precommand": null,
        "releaseTag": "package-two-v1.9.0",
      },
      "postcommand": false,
      "precommand": false,
      "published": true,
    },
  },
  "pipeTemplate": {
    "package-one": {
      "name": "package-one",
      "pipe": {
        "pkg": {
          "changelog": "## \\[2.3.1]

- Added some cool things.
",
          "command": {
            "command": "echo publish",
            "pipe": true,
          },
          "dependencies": undefined,
          "errorOnVersionRange": null,
          "manager": "javascript",
          "path": "./packages/package-one",
          "pkg": "package-one",
          "postcommand": null,
          "precommand": null,
          "releaseTag": null,
          "tag": "",
        },
        "pkgFile": {
          "currentVersion": "2.3.1",
          "deps": {},
          "name": "package-one",
          "pkg": {
            "description": "shrugs",
            "license": "MIT",
            "name": "package-one",
            "scripts": {
              "build": "npm info tauri@0.8.0 description",
              "test": "npm info covector@0.1.0 license",
            },
            "version": "2.3.1",
          },
          "version": "2.3.1",
          "versionMajor": 2,
          "versionMinor": 3,
          "versionPatch": 1,
        },
      },
    },
    "package-two": {
      "name": "package-two",
      "pipe": {
        "pkg": {
          "changelog": "## \\[1.9.0]

- Added some even cooler things.
",
          "command": {
            "command": "echo publish",
            "pipe": true,
          },
          "dependencies": undefined,
          "errorOnVersionRange": null,
          "manager": "javascript",
          "path": "./packages/package-two",
          "pkg": "package-two",
          "postcommand": null,
          "precommand": null,
          "releaseTag": null,
          "tag": "",
        },
        "pkgFile": {
          "currentVersion": "1.9.0",
          "deps": {},
          "name": "package-two",
          "pkg": {
            "description": "shrugs",
            "license": "MIT",
            "name": "package-two",
            "scripts": {
              "build": "echo this command is not piped, it is run from scripts for pk2",
              "test": "echo this command is not piped, it is run from the test script",
            },
            "version": "1.9.0",
          },
          "version": "1.9.0",
          "versionMajor": 1,
          "versionMinor": 9,
          "versionPatch": 0,
        },
      },
    },
  },
}
`;

exports[`integration test for complex commands > prod > runs test 1`] = `
{
  "commandsRan": {
    "package-one": {
      "command": "## \\[2.3.1]

- Added some cool things.

> package-one@2.3.1 build
> npm info tauri@0.8.0 description

npm warn Ignoring workspaces for specified package(s)
Multi-binding collection of libraries and templates for building Tauri apps
",
      "pkg": {
        "command": [
          {
            "command": "npm run build",
            "dryRunCommand": undefined,
            "pipe": true,
          },
          {
            "command": "npm test",
            "dryRunCommand": false,
          },
          {
            "command": "echo boop",
            "dryRunCommand": "echo deboop",
          },
        ],
        "dependencies": undefined,
        "errorOnVersionRange": null,
        "manager": "javascript",
        "path": "./packages/package-one",
        "pkg": "package-one",
        "pkgFile": {
          "currentVersion": "2.3.1",
          "deps": {},
          "file": {
            "content": "{
  "name": "package-one",
  "description": "shrugs",
  "version": "2.3.1",
  "license": "MIT",
  "scripts": {
    "build": "npm info tauri@0.8.0 description",
    "test": "npm info covector@0.1.0 license"
  }
}
",
            "extname": ".json",
            "filename": "package",
            "path": "packages/package-one/package.json",
          },
          "name": "package-one",
          "pkg": {
            "description": "shrugs",
            "license": "MIT",
            "name": "package-one",
            "scripts": {
              "build": "npm info tauri@0.8.0 description",
              "test": "npm info covector@0.1.0 license",
            },
            "version": "2.3.1",
          },
          "version": "2.3.1",
          "versionMajor": 2,
          "versionMinor": 3,
          "versionPatch": 1,
          "versionPrerelease": null,
        },
        "postcommand": null,
        "precommand": null,
        "releaseTag": "package-one-v2.3.1",
      },
      "postcommand": false,
      "precommand": false,
    },
    "package-two": {
      "command": "## \\[1.9.0]

- Added some even cooler things.

> package-two@1.9.0 build
> echo this command is not piped, it is run from scripts for pk2

this command is not piped, it is run from scripts for pk2
",
      "pkg": {
        "command": [
          {
            "command": "npm run build",
            "dryRunCommand": undefined,
            "pipe": true,
          },
          {
            "command": "npm test",
            "dryRunCommand": false,
          },
          {
            "command": "echo boop",
            "dryRunCommand": "echo deboop",
          },
        ],
        "dependencies": undefined,
        "errorOnVersionRange": null,
        "manager": "javascript",
        "path": "./packages/package-two",
        "pkg": "package-two",
        "pkgFile": {
          "currentVersion": "1.9.0",
          "deps": {},
          "file": {
            "content": "{
  "name": "package-two",
  "description": "shrugs",
  "version": "1.9.0",
  "license": "MIT",
  "scripts": {
    "build": "echo this command is not piped, it is run from scripts for pk2",
    "test": "echo this command is not piped, it is run from the test script"
  }
}
",
            "extname": ".json",
            "filename": "package",
            "path": "packages/package-two/package.json",
          },
          "name": "package-two",
          "pkg": {
            "description": "shrugs",
            "license": "MIT",
            "name": "package-two",
            "scripts": {
              "build": "echo this command is not piped, it is run from scripts for pk2",
              "test": "echo this command is not piped, it is run from the test script",
            },
            "version": "1.9.0",
          },
          "version": "1.9.0",
          "versionMajor": 1,
          "versionMinor": 9,
          "versionPatch": 0,
          "versionPrerelease": null,
        },
        "postcommand": null,
        "precommand": null,
        "releaseTag": "package-two-v1.9.0",
      },
      "postcommand": false,
      "precommand": false,
    },
  },
  "pipeTemplate": {
    "package-one": {
      "name": "package-one",
      "pipe": {
        "pkg": {
          "changelog": "## \\[2.3.1]

- Added some cool things.
",
          "command": [
            {
              "command": "npm run build",
              "pipe": true,
            },
            {
              "command": "npm test",
              "dryRunCommand": false,
            },
            {
              "command": "echo boop",
              "dryRunCommand": "echo deboop",
            },
          ],
          "dependencies": undefined,
          "errorOnVersionRange": null,
          "manager": "javascript",
          "path": "./packages/package-one",
          "pkg": "package-one",
          "postcommand": null,
          "precommand": null,
          "releaseTag": null,
          "tag": "",
        },
        "pkgFile": {
          "currentVersion": "2.3.1",
          "deps": {},
          "name": "package-one",
          "pkg": {
            "description": "shrugs",
            "license": "MIT",
            "name": "package-one",
            "scripts": {
              "build": "npm info tauri@0.8.0 description",
              "test": "npm info covector@0.1.0 license",
            },
            "version": "2.3.1",
          },
          "version": "2.3.1",
          "versionMajor": 2,
          "versionMinor": 3,
          "versionPatch": 1,
        },
      },
    },
    "package-two": {
      "name": "package-two",
      "pipe": {
        "pkg": {
          "changelog": "## \\[1.9.0]

- Added some even cooler things.
",
          "command": [
            {
              "command": "npm run build",
              "pipe": true,
            },
            {
              "command": "npm test",
              "dryRunCommand": false,
            },
            {
              "command": "echo boop",
              "dryRunCommand": "echo deboop",
            },
          ],
          "dependencies": undefined,
          "errorOnVersionRange": null,
          "manager": "javascript",
          "path": "./packages/package-two",
          "pkg": "package-two",
          "postcommand": null,
          "precommand": null,
          "releaseTag": null,
          "tag": "",
        },
        "pkgFile": {
          "currentVersion": "1.9.0",
          "deps": {},
          "name": "package-two",
          "pkg": {
            "description": "shrugs",
            "license": "MIT",
            "name": "package-two",
            "scripts": {
              "build": "echo this command is not piped, it is run from scripts for pk2",
              "test": "echo this command is not piped, it is run from the test script",
            },
            "version": "1.9.0",
          },
          "version": "1.9.0",
          "versionMajor": 1,
          "versionMinor": 9,
          "versionPatch": 0,
        },
      },
    },
  },
}
`;

exports[`integration test for complex commands > prod > runs version 1`] = `
{
  "commandsRan": {
    "package-one": {
      "applied": false,
      "command": false,
      "postcommand": false,
      "precommand": false,
    },
    "package-two": {
      "applied": false,
      "command": false,
      "postcommand": false,
      "precommand": false,
    },
  },
  "pipeTemplate": {},
}
`;

exports[`integration test to invoke sub commands > runs publish-primary in prod mode 1`] = `
{
  "commandsRan": {
    "package-one": {
      "command": "publish
",
      "pkg": {
        "command": [
          {
            "command": "echo publish",
            "dryRunCommand": undefined,
            "pipe": true,
          },
        ],
        "dependencies": undefined,
        "errorOnVersionRange": null,
        "manager": "javascript",
        "path": "./packages/package-one",
        "pkg": "package-one",
        "pkgFile": {
          "currentVersion": "2.3.1",
          "deps": {},
          "file": {
            "content": "{
  "name": "package-one",
  "version": "2.3.1",
  "license": "MIT",
  "scripts": {
    "build": "npm info tauri@0.8.0 description",
    "test": "npm info covector@0.1.0 license"
  }
}
",
            "extname": ".json",
            "filename": "package",
            "path": "packages/package-one/package.json",
          },
          "name": "package-one",
          "pkg": {
            "license": "MIT",
            "name": "package-one",
            "scripts": {
              "build": "npm info tauri@0.8.0 description",
              "test": "npm info covector@0.1.0 license",
            },
            "version": "2.3.1",
          },
          "version": "2.3.1",
          "versionMajor": 2,
          "versionMinor": 3,
          "versionPatch": 1,
          "versionPrerelease": null,
        },
        "postcommand": null,
        "precommand": null,
        "releaseTag": "package-one-v2.3.1",
      },
      "postcommand": false,
      "precommand": false,
    },
    "package-two": {
      "command": "publish
",
      "pkg": {
        "command": [
          {
            "command": "echo publish",
            "dryRunCommand": undefined,
            "pipe": true,
          },
        ],
        "dependencies": undefined,
        "errorOnVersionRange": null,
        "manager": "javascript",
        "path": "./packages/package-two",
        "pkg": "package-two",
        "pkgFile": {
          "currentVersion": "1.9.0",
          "deps": {},
          "file": {
            "content": "{
  "name": "package-two",
  "version": "1.9.0",
  "license": "MIT",
  "scripts": {
    "build": "echo this command is not piped, it is run from scripts for pk2",
    "test": "echo this command is not piped, it is run from the test script"
  }
}
",
            "extname": ".json",
            "filename": "package",
            "path": "packages/package-two/package.json",
          },
          "name": "package-two",
          "pkg": {
            "license": "MIT",
            "name": "package-two",
            "scripts": {
              "build": "echo this command is not piped, it is run from scripts for pk2",
              "test": "echo this command is not piped, it is run from the test script",
            },
            "version": "1.9.0",
          },
          "version": "1.9.0",
          "versionMajor": 1,
          "versionMinor": 9,
          "versionPatch": 0,
          "versionPrerelease": null,
        },
        "postcommand": null,
        "precommand": null,
        "releaseTag": "package-two-v1.9.0",
      },
      "postcommand": false,
      "precommand": false,
    },
  },
  "pipeTemplate": {
    "package-one": {
      "name": "package-one",
      "pipe": {
        "pkg": {
          "changelog": false,
          "command": {
            "command": "echo publish",
            "pipe": true,
          },
          "dependencies": undefined,
          "errorOnVersionRange": null,
          "manager": "javascript",
          "path": "./packages/package-one",
          "pkg": "package-one",
          "postcommand": null,
          "precommand": null,
          "releaseTag": null,
          "tag": "",
        },
        "pkgFile": {
          "currentVersion": "2.3.1",
          "deps": {},
          "name": "package-one",
          "pkg": {
            "license": "MIT",
            "name": "package-one",
            "scripts": {
              "build": "npm info tauri@0.8.0 description",
              "test": "npm info covector@0.1.0 license",
            },
            "version": "2.3.1",
          },
          "version": "2.3.1",
          "versionMajor": 2,
          "versionMinor": 3,
          "versionPatch": 1,
        },
      },
    },
    "package-two": {
      "name": "package-two",
      "pipe": {
        "pkg": {
          "changelog": false,
          "command": {
            "command": "echo publish",
            "pipe": true,
          },
          "dependencies": undefined,
          "errorOnVersionRange": null,
          "manager": "javascript",
          "path": "./packages/package-two",
          "pkg": "package-two",
          "postcommand": null,
          "precommand": null,
          "releaseTag": null,
          "tag": "",
        },
        "pkgFile": {
          "currentVersion": "1.9.0",
          "deps": {},
          "name": "package-two",
          "pkg": {
            "license": "MIT",
            "name": "package-two",
            "scripts": {
              "build": "echo this command is not piped, it is run from scripts for pk2",
              "test": "echo this command is not piped, it is run from the test script",
            },
            "version": "1.9.0",
          },
          "version": "1.9.0",
          "versionMajor": 1,
          "versionMinor": 9,
          "versionPatch": 0,
        },
      },
    },
  },
}
`;

exports[`integration test to invoke sub commands > runs publishSecondary in prod mode 1`] = `
{
  "commandsRan": {
    "package-one": {
      "command": "publish
",
      "pkg": {
        "command": [
          {
            "command": "echo publish",
            "dryRunCommand": undefined,
            "pipe": true,
          },
        ],
        "dependencies": undefined,
        "errorOnVersionRange": null,
        "manager": "javascript",
        "path": "./packages/package-one",
        "pkg": "package-one",
        "pkgFile": {
          "currentVersion": "2.3.1",
          "deps": {},
          "file": {
            "content": "{
  "name": "package-one",
  "version": "2.3.1",
  "license": "MIT",
  "scripts": {
    "build": "npm info tauri@0.8.0 description",
    "test": "npm info covector@0.1.0 license"
  }
}
",
            "extname": ".json",
            "filename": "package",
            "path": "packages/package-one/package.json",
          },
          "name": "package-one",
          "pkg": {
            "license": "MIT",
            "name": "package-one",
            "scripts": {
              "build": "npm info tauri@0.8.0 description",
              "test": "npm info covector@0.1.0 license",
            },
            "version": "2.3.1",
          },
          "version": "2.3.1",
          "versionMajor": 2,
          "versionMinor": 3,
          "versionPatch": 1,
          "versionPrerelease": null,
        },
        "postcommand": null,
        "precommand": null,
        "releaseTag": "package-one-v2.3.1",
      },
      "postcommand": false,
      "precommand": false,
    },
    "package-two": {
      "command": "publish
",
      "pkg": {
        "command": [
          {
            "command": "echo publish",
            "dryRunCommand": undefined,
            "pipe": true,
          },
        ],
        "dependencies": undefined,
        "errorOnVersionRange": null,
        "manager": "javascript",
        "path": "./packages/package-two",
        "pkg": "package-two",
        "pkgFile": {
          "currentVersion": "1.9.0",
          "deps": {},
          "file": {
            "content": "{
  "name": "package-two",
  "version": "1.9.0",
  "license": "MIT",
  "scripts": {
    "build": "echo this command is not piped, it is run from scripts for pk2",
    "test": "echo this command is not piped, it is run from the test script"
  }
}
",
            "extname": ".json",
            "filename": "package",
            "path": "packages/package-two/package.json",
          },
          "name": "package-two",
          "pkg": {
            "license": "MIT",
            "name": "package-two",
            "scripts": {
              "build": "echo this command is not piped, it is run from scripts for pk2",
              "test": "echo this command is not piped, it is run from the test script",
            },
            "version": "1.9.0",
          },
          "version": "1.9.0",
          "versionMajor": 1,
          "versionMinor": 9,
          "versionPatch": 0,
          "versionPrerelease": null,
        },
        "postcommand": null,
        "precommand": null,
        "releaseTag": "package-two-v1.9.0",
      },
      "postcommand": false,
      "precommand": false,
    },
  },
  "pipeTemplate": {
    "package-one": {
      "name": "package-one",
      "pipe": {
        "pkg": {
          "changelog": false,
          "command": {
            "command": "echo publish",
            "pipe": true,
          },
          "dependencies": undefined,
          "errorOnVersionRange": null,
          "manager": "javascript",
          "path": "./packages/package-one",
          "pkg": "package-one",
          "postcommand": null,
          "precommand": null,
          "releaseTag": null,
          "tag": "",
        },
        "pkgFile": {
          "currentVersion": "2.3.1",
          "deps": {},
          "name": "package-one",
          "pkg": {
            "license": "MIT",
            "name": "package-one",
            "scripts": {
              "build": "npm info tauri@0.8.0 description",
              "test": "npm info covector@0.1.0 license",
            },
            "version": "2.3.1",
          },
          "version": "2.3.1",
          "versionMajor": 2,
          "versionMinor": 3,
          "versionPatch": 1,
        },
      },
    },
    "package-two": {
      "name": "package-two",
      "pipe": {
        "pkg": {
          "changelog": false,
          "command": {
            "command": "echo publish",
            "pipe": true,
          },
          "dependencies": undefined,
          "errorOnVersionRange": null,
          "manager": "javascript",
          "path": "./packages/package-two",
          "pkg": "package-two",
          "postcommand": null,
          "precommand": null,
          "releaseTag": null,
          "tag": "",
        },
        "pkgFile": {
          "currentVersion": "1.9.0",
          "deps": {},
          "name": "package-two",
          "pkg": {
            "license": "MIT",
            "name": "package-two",
            "scripts": {
              "build": "echo this command is not piped, it is run from scripts for pk2",
              "test": "echo this command is not piped, it is run from the test script",
            },
            "version": "1.9.0",
          },
          "version": "1.9.0",
          "versionMajor": 1,
          "versionMinor": 9,
          "versionPatch": 0,
        },
      },
    },
  },
}
`;
